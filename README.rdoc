= Remote Forgery Protection

This is a Rails plugin that automatically adds authenticity token to Ajax request.


== Installation

Install the plugin

  $ ruby script/plugin install git://github.com/vlado/remote_forgery_protection.git
  
Generate remote_forgery_protection.js file by running

  $ ruby script/generate remote_forgery_protection
    
== Usage

Just add this line in your head section

  <%= remote_forgery_protection %>
  
This will produce something like
  
  <script type="text/javascript"> 
    window._token = 'somecomplextoken';
  </script> 
  <script src="/javascripts/remote_forgery_protection.js" type="text/javascript"></script>

If file <tt>/javascripts/remote_forgery_protection.js</tt> doesn't exist, all the code will be included inline and output will now look like

    <script type="text/javascript"> 
      window._token = 'somecomplextoken';
      Ajax.Base.prototype.initialize = Ajax.Base.prototype.initialize.wrap(function() {
        var args = $A(arguments), proceed = args.shift();
        ...
        lot of javascript code
        ..
        proceed.apply(null, args);
      });
    </script>

You can also force javascript to be included inline by passing <tt>:inline => true</tt> option

  <%= remote_forgery_protection :inline => true %>
  
All future non GET Ajax request will automatically send authenticity_token parameter. You will also have global variable <tt>_token</tt> to use anywhere in you're scripts.
  


== Licence

Copyright (c) 2009 Vlado Cingel, released under the MIT license
